# -----------------------------------------------------------------------------
# 1) Базовый образ с Python (можете выбрать нужную версию: 3.11, 3.10 и т. п.)
# -----------------------------------------------------------------------------
FROM python:3.11-slim

# -----------------------------------------------------------------------------
# 2) Переключаемся в директорию /app внутри контейнера
# -----------------------------------------------------------------------------
WORKDIR /app

# -----------------------------------------------------------------------------
# 3) Копируем файл requirements.txt (зависимости)
# -----------------------------------------------------------------------------
COPY requirements.txt .

# -----------------------------------------------------------------------------
# 4) Устанавливаем зависимости
# -----------------------------------------------------------------------------
RUN pip install --no-cache-dir -r requirements.txt

# -----------------------------------------------------------------------------
# 5) Копируем в контейнер весь код (бота) и JSON-файлы (menu.json, languages.json и т. д.)
# -----------------------------------------------------------------------------
COPY . .

# -----------------------------------------------------------------------------
# 6) Указываем переменные окружения (Token и другие), 
#    но на Railway обычно лучше задавать их через Settings → Variables, 
#    а не хардкодить в Dockerfile. Тем не менее, пример:
# -----------------------------------------------------------------------------
# ENV TOKEN=<ваш-токен>
# ENV ADMIN_ID=<ваш-ADMIN_ID>
# ENV GROUP_CHAT_ID=<ваш-GROUP_CHAT_ID>
# ENV PERSONAL_CHAT_ID=<ваш-PERSONAL_CHAT_ID>

# -----------------------------------------------------------------------------
# 7) Команда, которая запускает бота
#    Предположим, что файл с ботом называется bot.py. 
#    Если у вас другое имя, замените "bot.py" на актуальное.
# -----------------------------------------------------------------------------
CMD ["python", "bot.py"]
